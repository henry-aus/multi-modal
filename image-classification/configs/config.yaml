# Configuration for CNN Image Classification Training

# Data settings
data:
  train_file: "data/re_id_1000_train.txt"
  test_file: "data/re_id_1000_test.txt"
  data_root: "data/images"
  num_classes: 10
  image_size: 224
  batch_size: 32
  num_workers: 4

# Model settings
model:
  architecture: "resnet34"
  pretrained: true
  dropout_rate: 0.5
  freeze_backbone: false

# Training settings
training:
  epochs: 50
  learning_rate: 0.001
  weight_decay: 0.0001
  scheduler: "cosine"  # Options: cosine, step, plateau
  step_size: 10        # For StepLR scheduler
  gamma: 0.1           # For StepLR scheduler
  patience: 10         # For ReduceLROnPlateau scheduler
  factor: 0.5          # For ReduceLROnPlateau scheduler

  # Early stopping
  early_stopping: true
  early_stopping_patience: 15
  early_stopping_min_delta: 0.001

  # Mixed precision training
  mixed_precision: true

  # Gradient clipping
  gradient_clipping: true
  max_grad_norm: 1.0

# Optimization settings
optimizer:
  type: "adam"  # Options: adam, sgd, adamw
  momentum: 0.9  # For SGD
  beta1: 0.9     # For Adam/AdamW
  beta2: 0.999   # For Adam/AdamW
  eps: 1.0e-8    # For Adam/AdamW

# Loss settings
loss:
  type: "cross_entropy"
  label_smoothing: 0.1
  class_weights: null  # Can specify weights for imbalanced classes

# Evaluation settings
evaluation:
  save_predictions: true
  save_confusion_matrix: true
  compute_per_class_metrics: true

# Logging and saving
logging:
  log_interval: 10
  save_model: true
  save_best_only: true
  save_last: true
  checkpoint_dir: "models"
  log_dir: "logs"
  results_dir: "results"

  # TensorBoard logging
  tensorboard: true
  tensorboard_log_dir: "logs/tensorboard"

# Reproducibility
seed: 42
deterministic: false  # Set to true for reproducible results (may impact performance)

# Device settings (auto-detected if not specified)
device: "auto"  # Options: auto, cuda, mps, cpu